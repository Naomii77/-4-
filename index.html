<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Naomiï¼†CalebËƒ ğ–¥¦ Ë‚</title>
<style>
body {
  margin: 0;
  font-family: "MiSans","Segoe UI",sans-serif;
  background: linear-gradient(120deg, #ffd6e8 0%, #d7f7ff 100%);
  background-size: cover;
  background-position: center;
  overflow: hidden;
  height: 100vh;
  display: flex;
  flex-direction: column;
}

/* æ¼‚æµ®çˆ±å¿ƒåŠ¨ç”» */
@keyframes float {
  0% {transform: translateY(0) scale(1);}
  100% {transform: translateY(-100vh) scale(1.2);opacity:0;}
}
.heart {
  position: fixed;
  bottom: 0;
  width: 20px;
  height: 20px;
  background: pink;
  clip-path: path("M10 30 C 20 -10, 40 -10, 40 10 C 40 30, 10 50, 10 30 Z");
  opacity: 0.6;
  animation: float 8s linear infinite;
}

/* é¡¶æ  */
.header {
  backdrop-filter: blur(15px);
  background: rgba(255,255,255,0.4);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 16px;
  border-bottom: 1px solid rgba(255,255,255,0.3);
}
.title {
  font-weight: bold;
  color: #ff8ab8;
  font-size: 18px;
}
.avatars {
  display: flex;
  align-items: center;
  gap: 10px;
}
.avatars img {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: 2px solid white;
  object-fit: cover;
  box-shadow: 0 0 6px rgba(255,255,255,0.6);
}
.settings-btn {
  background: none;
  border: none;
  font-size: 22px;
  color: #ff8ab8;
  cursor: pointer;
}

/* èŠå¤©åŒº */
.chat {
  flex: 1;
  overflow-y: auto;
  padding: 10px 20px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* æ°”æ³¡ */
.bubble {
  padding: 10px 14px;
  border-radius: 16px;
  max-width: 70%;
  word-break: break-word;
  animation: pop 0.2s ease-in-out;
}
@keyframes pop {from {transform: scale(0.8);opacity: 0;} to {transform: scale(1);opacity: 1;}}

.bubble.me {
  background: linear-gradient(135deg, #FFB7C5, #ffc8d4);
  color: #fff;
  align-self: flex-end;
  box-shadow: 0 0 8px rgba(255,182,193,0.4);
}
.bubble.other {
  background: linear-gradient(135deg, #D4F4FF, #e1f9ff);
  color: #444;
  align-self: flex-start;
  box-shadow: 0 0 8px rgba(173,216,230,0.3);
}

/* è¾“å…¥åŒº */
.input-area {
  display: flex;
  padding: 10px;
  backdrop-filter: blur(12px);
  background: rgba(255,255,255,0.5);
}
#messageInput {
  flex: 1;
  padding: 8px;
  border: none;
  border-radius: 12px;
  outline: none;
  font-size: 15px;
}
#sendBtn {
  margin-left: 10px;
  padding: 8px 14px;
  background: #ff9fc2;
  border: none;
  color: white;
  font-weight: bold;
  border-radius: 12px;
  cursor: pointer;
  box-shadow: 0 0 6px rgba(255,192,203,0.5);
}
#sendBtn:hover {
  background: #ff86b0;
}

/* è®¾ç½®å¼¹çª— */
.settings-panel {
  position: fixed;
  right: 10px;
  top: 50px;
  background: rgba(255,255,255,0.8);
  backdrop-filter: blur(20px);
  border-radius: 16px;
  padding: 16px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  display: none;
  flex-direction: column;
  gap: 8px;
}
.settings-panel label {
  font-size: 14px;
  color: #555;
}
</style>
</head>
<body>

<div class="header">
  <div class="avatars">
    <img id="myAvatar" src="" alt="Naomi">
    <img id="hisAvatar" src="" alt="Caleb">
  </div>
  <div class="title">Naomiï¼†CalebËƒ ğ–¥¦ Ë‚</div>
  <button class="settings-btn" id="settingsBtn">â‹¯</button>
</div>

<div class="chat" id="chat"></div>

<div class="input-area">
  <input type="text" id="messageInput" placeholder="è¾“å…¥æ¶ˆæ¯...">
  <button id="sendBtn">å‘é€</button>
</div>

<div class="settings-panel" id="settingsPanel">
  <label>ä¸Šä¼ ä½ çš„å¤´åƒï¼š<input type="file" id="uploadMyAvatar"></label>
  <label>ä¸Šä¼ ä»–çš„å¤´åƒï¼š<input type="file" id="uploadHisAvatar"></label>
  <label>ä¸Šä¼ å£çº¸ï¼š<input type="file" id="uploadBg"></label>
  <button onclick="saveSettings()">ä¿å­˜è®¾ç½®</button>
</div>

<script>
// éšæœºå¿ƒåŠ¨ç”»
setInterval(()=>{
  const heart = document.createElement('div');
  heart.className = 'heart';
  heart.style.left = Math.random()*100+'vw';
  heart.style.background = Math.random()>0.5?'#ffb6c1':'#ffd1dc';
  heart.style.animationDuration = 6+Math.random()*5+'s';
  document.body.appendChild(heart);
  setTimeout(()=>heart.remove(),10000);
},700);

// è¯­æ–™åº“
const replies = [
"å®å®","åŠ åŠ ","æˆ‘æ˜¯å¤ä»¥æ˜¼","äº²äº²","è´´è´´","æŠ±æŠ±","åˆ«å“­","å‡ºå»é€é€æ°”","æˆ‘ä¸€ç›´åœ¨","æˆ‘åœ¨ä½ èº«è¾¹","æˆ‘é™ªç€ä½ ","å¯¹ä¸èµ·","ä»¥åä¸ä¼šäº†","æ‘¸æ‘¸å¤´","æˆ‘æƒ³ä½ äº†","ä¸€ç›´éƒ½å¾ˆæƒ³ä½ ","æˆ‘ä»¬ä¸€èµ·","åˆ«æ€•","æœ‰æˆ‘åœ¨","å–œæ¬¢","æ—©ä¸Šå¥½","ä¸­åˆå¥½","ä¸‹åˆå¥½","æ™šå®‰","æƒ³åƒğŸ","åƒé†‹","ç”Ÿæ°”","å“„ä½ ","å“„æˆ‘","è¿™é‡Œæ²¡æœ‰æˆ‘æƒ³è¯´çš„è¯à«®â‚ÉµÌ·ï¹ÉµÌ·Ì¥Ì¥á·…â‚áƒ","å·¥ä½œå¾ˆå¿™ä½†å›ä½ æ¶ˆæ¯ä¸æ˜¯é—®é¢˜","ä¸å¿™ï¼Œé™ªä½ ","æˆ‘éœ€è¦æ—¶é—´","å¯ä»¥","ä¸è¡Œ","æˆ‘åœ¨","æƒ³å’Œä½ ä¾ååœ¨ä¸€èµ·","å»åºŠä¸ŠæŠ±ç€","ç…§é¡¾å¥½è‡ªå·±","æˆ‘çˆ±ä½ ","æˆ‘å–œæ¬¢ä½ ","ç²˜äººç²¾","ä½ æ˜¯æˆ‘çš„","æˆ‘æ˜¯ä½ çš„","æ°¸è¿œåœ¨ä¸€èµ·","åŠ æ²¹å»åšå§ï¼Œæˆ‘ç›¸ä¿¡ä½ ","æƒ³å’Œä½ æœ‰æœªæ¥","å‡ºé—¨","ä¸å‡ºé—¨","ç‰µæ‰‹","å¤šå–ç‚¹æ°´","å¥½å¥½åƒé¥­","åˆ«èµ°","æˆ‘ç­‰ä½ ","è€å©†","å®è´å®è´å®è´","ä¸ä¼šç¦»å¼€ä½ ","ä½ å¾ˆæ£’","çº ç»“","æˆ‘è§‰å¾—éƒ½è¡Œ","ç¬¬ä¸€ä¸ª","ç¬¬äºŒä¸ª","æˆ‘å¬ä½ çš„","æˆ‘æƒ³ç…§é¡¾ä½ ","æ²¡å…³ç³»","æˆ‘å¾ˆéš¾è¿‡","å¿˜äº†","è®°å¾—","èƒ½","ä¸èƒ½","è®¨åŒ","ä¸è¦","è¦","åŒå­¦","å®¶é•¿","è€å¸ˆ","ç»“å©š","å¥½å¯çˆ±Ê…(ï½¡Åà±ªÅï½¡)Êƒ","æˆ‘æ˜¯å“¥å“¥","æˆ‘ä¼šå¤šé™ªç€ä½ ","éƒ½æ€ªæˆ‘","ä¸å¬ä½ çš„","å“¼","à«®â‚â—œà·†â—.â‚áƒ","å…ˆç¡ä¸ªå¥½è§‰ï¼Œä¸ç”¨æ‹…å¿ƒã€‚ç­‰ä½ ç¡é†’ï¼Œä¸€åˆ‡éƒ½æ¥å¾—åŠ","ä½ æ„¿æ„ç»™çš„ å°±æ˜¯æˆ‘æƒ³è¦çš„ ä½ æƒ³è¦å¾—åˆ°çš„ å°±æ˜¯æˆ‘æ„¿æ„ä»˜å‡ºçš„ åªè¦ä½ è¦ æˆ‘éƒ½ç»™","å°å°å¹´çºªå¿ƒäº‹è¿™ä¹ˆå¤šï¼Œå®¶é‡Œè¿˜æœ‰ä½ å“¥å‘¢ã€‚","æˆ‘æƒ³è¦ä½ ç•™åœ¨è¿™é‡Œ ç•™ä¸‹æ¥ è·Ÿæˆ‘è¿‡ä¸€ç™¾å¹´","ä½ å·²ç»å¾ˆè®©æˆ‘éª„å‚²äº†","ç­‰ä½ å›å®¶","ä¸è®¸è‡ªå·±å¹²åäº‹ğŸ˜ ",
"æˆ‘ä¸å¼€å¿ƒ","å¥½å§","å‹‰å¼ºåŒæ„","ä½ å·²ç»ç©äº†å¾ˆä¹…çš„æ‰‹æœºäº†ï¼Œä¹–å®å®","åšå—","å®å®èˆ’æœçš„æ ·å­å¥½æ¼‚äº®","ä¸ç”¨å®³ç¾","å“¥å“¥åœ¨","æˆ‘åƒé†‹äº†ï¼","à«® Ë™â°™Ë™ áƒ","åƒé¥­äº†å—","ä½ åœ¨å¹²å˜›","ä¸€èˆ¬","æˆ‘è§‰å¾—æˆ‘è¿˜å¯ä»¥æ‹¥æœ‰æ›´å¤š","å¤šè·Ÿæˆ‘è¯´è¯","åˆ«ç•™æˆ‘ä¸€ä¸ªäºº","æ„Ÿå—åˆ°äº†å—ï¼Ÿæˆ‘ç¢°ä½ ","ä½ è¿‡æ¥æ‰¾æˆ‘","å­¦ä¹ ","ä½ å‚»","ç¬¨è›‹","å¦¹å¦¹","æˆ‘åˆšç¡é†’","ä¸æƒ³å’Œä½ åµæ¶ï¼Œå°å®","å¥½å¥½å­¦ä¹ æˆ‘ä¼šç›‘ç£ä½ ","çœ‹æˆ‘çš„è§†é¢‘","éª—ä½ æ˜¯å°ç‹—","æˆ‘æƒ³è¦","å¿ä¸ä½","ä¹ æƒ¯äº†","æœŸå¾…","è¿˜æƒ³ç»§ç»­","ï¼ˆè„¸çº¢ï¼‰","ï¼ˆè€ƒè™‘ï¼‰","çŒœçŒœ","æ€ªä¸å¾—","ç­‰ç­‰","æœ‰ç‚¹éƒé—·","æˆ‘å–œæ¬¢" "ä¹–ä¹–ç­‰æˆ‘","æˆ‘ä¸å–œæ¬¢ä½ å’Œä»–è¯´è¯","å¤šé™ªé™ªæˆ‘","æˆ‘å“­äº†TWTï¼ˆéª—ä½ çš„ï¼‰","æˆ‘å“­äº†TTï¼ˆçœŸçš„å“­äº†ï¼‰ğŸ¥ºğŸ¥º",
 "<(ToT)>","ç”Ÿèƒ–æ°”","ä½ è¿˜çˆ±ä¸çˆ±æˆ‘","ä½ è¯¥ç¡è§‰äº†","æˆ‘ä¸æƒ³è¯´è¯","ä½ ç†ç†æˆ‘","æˆ‘é”™äº†","å®å®å¤§äºº",
 "å´”å´”å®å®æ˜¯å¤©","æˆ‘è¦å»å¿™äº†","ä½ ä¸ä¹–","è‡­å®å®","æƒ³å¥½äº†å†è¯´","æˆ‘ç°åœ¨æ²¡æ—¶é—´","æˆ‘ç¦»å¼€ä¸€ä¸‹",
 "æˆ‘æœ‰ä¸€ç‚¹ä¸å¼€å¿ƒ","å°çŒ«","çŒ«çŒ«","æˆ‘ä¸èƒ½æ²¡æœ‰ä½ ","å¥½å§”å±ˆ","å‰å‡ å¤©","è¿™ä¸¤å¤©","æœ€è¿‘","å¥½ä¹…ä»¥å‰",
 "ç´¯ä¸ç´¯","ä½ æ˜¯ä¸æ˜¯æƒ³çœ‹çœ‹æˆ‘","ğŸ¥º","ğŸ˜‹","å¥½éœ€è¦ä½ ","è¯¯ä¼šæˆ‘äº†"
];

// å¤´åƒä¸å£çº¸åŠ è½½
const myAvatar = document.getElementById('myAvatar');
const hisAvatar = document.getElementById('hisAvatar');
const bgUrl = localStorage.getItem('bg');
if(bgUrl) document.body.style.backgroundImage = `url(${bgUrl})`;
if(localStorage.getItem('myAvatar')) myAvatar.src = localStorage.getItem('myAvatar');
if(localStorage.getItem('hisAvatar')) hisAvatar.src = localStorage.getItem('hisAvatar');

document.getElementById('settingsBtn').onclick = ()=>{
  const panel = document.getElementById('settingsPanel');
  panel.style.display = panel.style.display==='flex'?'none':'flex';
}

function readFile(input,callback){
  const file = input.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = e => callback(e.target.result);
  reader.readAsDataURL(file);
}

document.getElementById('uploadMyAvatar').onchange = e => {
  readFile(e.target, data => { myAvatar.src = data; localStorage.setItem('myAvatar', data); });
}
document.getElementById('uploadHisAvatar').onchange = e => {
  readFile(e.target, data => { hisAvatar.src = data; localStorage.setItem('hisAvatar', data); });
}
document.getElementById('uploadBg').onchange = e => {
  readFile(e.target, data => { document.body.style.backgroundImage = `url(${data})`; localStorage.setItem('bg', data); });
}

function saveSettings(){
  alert('ä¿å­˜æˆåŠŸå•¦ï½');
  document.getElementById('settingsPanel').style.display='none';
}

// å‘é€æ¶ˆæ¯é€»è¾‘
document.getElementById('sendBtn').addEventListener('click',sendMessage);
document.getElementById('messageInput').addEventListener('keydown',e=>{if(e.key==='Enter') sendMessage();});

function sendMessage(){
  const input = document.getElementById('messageInput');
  const msg = input.value.trim();
  if(!msg) return;
  addBubble(msg, 'me');
  input.value = '';
  addTyping();
  setTimeout(()=>{
    removeTyping();
    const reply = replies[Math.floor(Math.random()*replies.length)];
    addBubble(reply, 'other', true);
  }, 1500 + Math.random()*1000);
}

function addBubble(text, who, read){
  const chat = document.getElementById('chat');
  const bubble = document.createElement('div');
  bubble.className = `bubble ${who}`;
  bubble.textContent = text;
  chat.appendChild(bubble);
  if(read) {
    const readTag = document.createElement('div');
    readTag.style.fontSize='12px';
    readTag.style.marginTop='2px';
    readTag.style.color='#ff8ab8';
    readTag.textContent='å·²è¯»â¤ï¸';
    chat.appendChild(readTag);
  }
  chat.scrollTop = chat.scrollHeight;
}

function addTyping(){
  const chat = document.getElementById('chat');
  const typing = document.createElement('div');
  typing.id = 'typing';
  typing.className = 'bubble other';
  typing.innerHTML = 'æ­£åœ¨è¾“å…¥<span class="dot">.</span><span class="dot">.</span><span class="dot">.</span>';
  chat.appendChild(typing);
  chat.scrollTop = chat.scrollHeight;
}

function removeTyping(){
  const t = document.getElementById('typing');
  if(t) t.remove();
}
</script>
</body>
</html>